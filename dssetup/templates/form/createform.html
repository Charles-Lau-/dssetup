 {%extends "baseForm.html"%} 
 
{%block form-content%}
        
        {%load filters%}
          {%if hidden%} 
          <form action={%url "create_mapping_form" hidden%} method="post" class="form-horizontal" id="create_form">
          
          {%else%}
          <form action={%url "create_main_form" %} method="post" class="form-horizontal" id="create_form">
          {%endif%}
              {% csrf_token %}
         
               <input type="hidden" value={{hidden}} name="domainName">
               {% for field in form%}
                <div class="control-group">
                   <label class="control-label">{{field.label_tag}}</label>
                   <div class="controls">
                     {{field}}
                    </div>
                    <span class="help-inline">{{field.errors}}</span> 
                </div> 
                 {% endfor %}
          
              
             
              <a class="btn btn-info" onclick="submit()">save</a>
               
            </div>       
          </form>
 
{%endblock%}

{%block js%}
 {{block.super}}
 <script>
       
       window.onload = initialization()
       function  initialization(){
          function deal_effect_time(){
                   var choice  = document.getElementById("s2id_id_appCategory")
                   if(choice!=null){ 
                       var text = choice.innerText
                  
                   
                       if(text.indexOf("定时")!=-1){
                           document.getElementById("id_effectTime").parentNode.parentNode.style.display = "block"  
                      }
                      else{
                          document.getElementById("id_effectTime").parentNode.parentNode.style.display = "none"  
                      }
                 }
          }
          
          
         
          
          var category = document.getElementById("id_appCategory")
       
          if(category!=null){
       
            category.onclick=deal_effect_time 
          }
       }
       
       
       
       
       function submit(){
                      var category = document.getElementById("id_appCategory")
       
                      if(category!=null){
       
                               var choice  = document.getElementById("s2id_id_appCategory")
             
                                var text = choice.innerText
                  
                   
                                if(text.indexOf("定时") ==-1){
                                         document.getElementById("id_effectTime").parentNode.removeChild(document.getElementById("id_effectTime"))
                                          }
                   
                        }
            
                       document.getElementById("create_form").submit()
       }
       
    
 </script> 

{%endblock%}